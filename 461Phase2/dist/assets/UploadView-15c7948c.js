import{_ as u,e as c,r as d,o as h,c as g,b as f,w as m,a as s,t as i,f as _,v as y,F as w,d as S}from"./index-31af6d47.js";const k={name:"Add",data(){return{ip:"3.22.209.9",uploadStatus:"",npmUrl:"",ingestStatus:""}},methods:{async handleFileUpload(){const t=this.$refs.file;console.log("selected file",t.files);const e=t.files[0],l=new FormData;l.append("file",e),this.uploadStatus="Uploading...";try{const o=await c.post(`http://${this.ip}:8080/package`,l,{headers:{"Content-Type":"application/zip"}});console.log("File uploaded successfully.",o.data),this.uploadStatus="File uploaded successfully"}catch(o){console.error("Error uploading the file.",o),this.uploadStatus=`Error uploading the file ${o}`}},async npmIngest(){console.log("url: ",this.npmUrl),this.ingestStatus="Ingesting...";try{if(!(await fetch(`http://${this.ip}:8080/package`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:this.npmUrl})})).ok)throw new Error("Network response was not ok");this.ingestStatus="Successfully ingested"}catch(t){console.error("There was a problem with the fetch operation:",t),this.ingestStatus=`Failed to ingest: ${t}`}}}},U=s("h1",{class:"title"}," Upload a package ",-1);function x(t,e,l,o,n,r){const p=d("router-link");return h(),g(w,null,[f(p,{to:{name:"home",params:{}},class:"goToBtn"},{default:m(()=>[S("Back to search page")]),_:1}),U,s("input",{ref:"file",onChange:e[0]||(e[0]=a=>r.handleFileUpload()),type:"file"},null,544),s("h3",null,i(n.uploadStatus),1),_(s("input",{id:"textInput",type:"text","onUpdate:modelValue":e[1]||(e[1]=a=>n.npmUrl=a),placeholder:"Type an in npm url to ingest"},null,512),[[y,n.npmUrl]]),s("button",{id:"ingest",onClick:e[2]||(e[2]=(...a)=>r.npmIngest&&r.npmIngest(...a))}," Ingest "),s("h3",null,i(n.ingestStatus),1)],64)}const T=u(k,[["render",x]]);export{T as default};
