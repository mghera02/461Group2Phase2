import{_ as u,e as c,r as d,o as h,c as g,b as f,w as m,a as s,t as i,f as y,v as S,F as w,d as U}from"./index-cba7213e.js";/* empty css                                                                */const k={name:"Add",data(){return{ip:"3.139.57.32",uploadStatus:"",npmUrl:"",ingestStatus:""}},methods:{async handleFileUpload(){const t=this.$refs.file.files[0],o=new FileReader;o.onload=async()=>{const r=o.result.split(",")[1];this.uploadStatus="Uploading...";try{const e=await c.post(`http://${this.ip}:8080/package`,{Content:r},{headers:{"Content-Type":"application/json"}});console.log("File uploaded successfully.",e.data),this.uploadStatus="File uploaded successfully"}catch(e){console.error("Error uploading the file.",e),this.uploadStatus=`Error uploading the file ${e}`}},o.readAsDataURL(t)},async npmIngest(){console.log("url: ",this.npmUrl),this.ingestStatus="Ingesting...";try{if(!(await fetch(`http://${this.ip}:8080/package`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({URL:this.npmUrl})})).ok)throw new Error("Network response was not ok");this.ingestStatus="Successfully ingested"}catch(n){console.error("There was a problem with the fetch operation:",n),this.ingestStatus=`Failed to ingest: ${n}`}}}},_=s("h1",{class:"title"}," Upload a package ",-1),x=s("h2",null," or ",-1);function F(n,t,o,r,e,l){const p=d("router-link");return h(),g(w,null,[f(p,{to:{name:"home",params:{}},class:"goToBtn"},{default:m(()=>[U("Back to search page")]),_:1}),_,s("input",{class:"btn",ref:"file",onChange:t[0]||(t[0]=a=>l.handleFileUpload()),type:"file"},null,544),s("h3",null,i(e.uploadStatus),1),x,y(s("input",{id:"textInput",type:"text","onUpdate:modelValue":t[1]||(t[1]=a=>e.npmUrl=a),placeholder:"Type an in npm url to ingest"},null,512),[[S,e.npmUrl]]),s("button",{id:"ingest",class:"btn",onClick:t[2]||(t[2]=(...a)=>l.npmIngest&&l.npmIngest(...a))}," Ingest "),s("h3",null,i(e.ingestStatus),1)],64)}const b=u(k,[["render",F]]);export{b as default};
