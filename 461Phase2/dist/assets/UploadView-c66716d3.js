import{_ as c,e as d,r as u,o as h,c as g,b as f,w as m,a as s,t as p,f as y,v as w,F as S,d as U}from"./index-c001a967.js";/* empty css                                                                */const k={name:"Add",data(){return{ip:"3.139.57.32",uploadStatus:"",npmUrl:"",ingestStatus:""}},methods:{async handleFileUpload(){const t=this.$refs.file;console.log("selected file",t.files),this.uploadStatus="Uploading...";const e=t.files[0],r=new FileReader;r.onload=async i=>{const o=i.target.result.split(",")[1];try{const a=await d.post("http://3.139.57.32:8080/package",{Content:o},{headers:{"Content-Type":"application/json"}});console.log("File uploaded successfully.",a.data)}catch(a){console.error("Error uploading the file.",a)}},r.readAsDataURL(e)},async npmIngest(){console.log("url: ",this.npmUrl),this.ingestStatus="Ingesting...";try{if(!(await fetch(`http://${this.ip}:8080/package`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({URL:this.npmUrl})})).ok)throw new Error("Network response was not ok");this.ingestStatus="Successfully ingested"}catch(t){console.error("There was a problem with the fetch operation:",t),this.ingestStatus=`Failed to ingest: ${t}`}}}},_=s("h1",{class:"title"}," Upload a package ",-1),x=s("h2",null," or ",-1);function C(t,e,r,i,n,o){const a=u("router-link");return h(),g(S,null,[f(a,{to:{name:"home",params:{}},class:"goToBtn"},{default:m(()=>[U("Back to search page")]),_:1}),_,s("input",{class:"btn",ref:"file",onChange:e[0]||(e[0]=l=>o.handleFileUpload()),type:"file"},null,544),s("h3",null,p(n.uploadStatus),1),x,y(s("input",{id:"textInput",type:"text","onUpdate:modelValue":e[1]||(e[1]=l=>n.npmUrl=l),placeholder:"Type an in npm url to ingest"},null,512),[[w,n.npmUrl]]),s("button",{id:"ingest",class:"btn",onClick:e[2]||(e[2]=(...l)=>o.npmIngest&&o.npmIngest(...l))}," Ingest "),s("h3",null,p(n.ingestStatus),1)],64)}const b=c(k,[["render",C]]);export{b as default};
